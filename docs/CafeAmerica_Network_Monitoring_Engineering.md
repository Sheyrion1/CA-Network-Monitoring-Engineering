Caf Amrica
Network Monitoring & Alerts Infrastructure
Engineering Version


Author: Facundo Camacho - Department of Systems, Caf Amrica
Date: October 2025

1. Technical Overview
This document provides a detailed engineering reference for the monitoring and alerting infrastructure of Caf Amrica. It focuses on the technical components implemented with Observium CE, MikroTik routers, SNMP communication, and automated alert systems via Telegram and email.
2. Network Topology
Caf Amrica maintains six interconnected sites through L2TP VPN tunnels using OSPF routing. Each branch has dual ISP connections for redundancy and dynamic routing balance. Casa Central (HQ) hosts the Observium CE instance, acting as the SNMP data collector and alert controller.

                   ? Azure Cloud (Future Integration)
                  ????????????????????????????????
                  ? Azure AD Connect / Site Backup ?
                  ????????????????????????????????
                                ? VPN/IPSec (Future)
???????????????????????????????????????????????????????????????????
? Casa Central (HQ)                                                ?
? ??? MikroTik Router (Dual ISP, OSPF)                             ?
? ??? Observium CE Server (SNMP, Syslog)                           ?
? ??? SQL Primary + Mirror Servers                                 ?
? ??? QNAP NAS (Hybrid Backup Sync)                                ?
? ??? Secondary Data Center                                        ?
????????????????????????????????????????????????????????????????????
        ?             ?             ?             ?             ?
???????????????? ????????????? ????????????? ????????????? ??????????????
? Abasto       ? ? Cabot     ? ? Cipolleti ? ? Calivar   ? ? Nuche     ?
? ?? MikroTik  ? ? ?? MikroTik? ? ?? MikroTik? ? ?? MikroTik? ? ?? MikroTik?
? ?? SQL Mirror? ? ?? SQL Mir.? ? ?? SQL Mir.? ? ?? SQL Mir.? ? ?? SQL Mir.?
? ?? QNAP NAS  ? ? ?? QNAP NAS? ? ?? QNAP NAS? ? ?? QNAP NAS? ? ?? QNAP NAS?
? ?? Dual ISP  ? ? ?? Dual ISP? ? ?? Dual ISP? ? ?? Dual ISP? ? ?? Dual ISP?
???????????????? ?????????????? ?????????????? ?????????????? ??????????????

3. Observium Configuration
The Observium CE server is installed at HQ on a dedicated Linux VM (Ubuntu 22.04 LTS). All MikroTik routers, Windows servers, and QNAP NAS units expose SNMP v2c for polling. SNMP community strings are restricted to HQ IPs for security. Syslog forwarding from all routers ensures centralized event visibility.
4. MikroTik Monitoring Scripts (Overview)
Each MikroTik router runs automated scripts to detect link failures and notify administrators. The scripts use Netwatch to monitor gateway IPs and Ethernet link states. When a failure occurs, the router sends a Telegram alert to the Caf Amrica IT team via a dedicated bot, and optionally triggers an email alert through SMTP.
5. Alert Flow

????????????????
? MikroTik     ?
? (Netwatch)   ?
????????????????
       ? detects link failure
       ?
????????????????
? Script runs  ?
? (SendTelegram)?
????????????????
       ? sends message
   Caf Amrica
Network Monitoring & Alerts Infrastructure
Engineering Version


Author: Facundo Camacho - Department of Systems, Caf Amrica
Date: October 2025

1. Technical Overview
This document provides a detailed engineering reference for the monitoring and alerting infrastructure of Caf Amrica. It focuses on the technical components implemented with Observium CE, MikroTik routers, SNMP communication, and automated alert systems via Telegram and email.
2. Network Topology
Caf Amrica maintains six interconnected sites through L2TP VPN tunnels using OSPF routing. Each branch has dual ISP connections for redundancy and dynamic routing balance. Casa Central (HQ) hosts the Observium CE instance, acting as the SNMP data collector and alert controller.

                   ? Azure Cloud (Future Integration)
                  ????????????????????????????????
                  ? Azure AD Connect / Site Backup ?
                  ????????????????????????????????
                                ? VPN/IPSec (Future)
???????????????????????????????????????????????????????????????????
? Casa Central (HQ)                                                ?
? ??? MikroTik Router (Dual ISP, OSPF)                             ?
? ??? Observium CE Server (SNMP, Syslog)                           ?
? ??? SQL Primary + Mirror Servers                                 ?
? ??? QNAP NAS (Hybrid Backup Sync)                                ?
? ??? Secondary Data Center                                        ?
????????????????????????????????????????????????????????????????????
        ?             ?             ?             ?             ?
???????????????? ????????????? ????????????? ????????????? ??????????????
? Abasto       ? ? Cabot     ? ? Cipolleti ? ? Calivar   ? ? Nuche     ?
? ?? MikroTik  ? ? ?? MikroTik? ? ?? MikroTik? ? ?? MikroTik? ? ?? MikroTik?
? ?? SQL Mirror? ? ?? SQL Mir.? ? ?? SQL Mir.? ? ?? SQL Mir.? ? ?? SQL Mir.?
? ?? QNAP NAS  ? ? ?? QNAP NAS? ? ?? QNAP NAS? ? ?? QNAP NAS? ? ?? QNAP NAS?
? ?? Dual ISP  ? ? ?? Dual ISP? ? ?? Dual ISP? ? ?? Dual ISP? ? ?? Dual ISP?
???????????????? ?????????????? ?????????????? ?????????????? ??????????????

3. Observium Configuration
The Observium CE server is installed at HQ on a dedicated Linux VM (Ubuntu 22.04 LTS). All MikroTik routers, Windows servers, and QNAP NAS units expose SNMP v2c for polling. SNMP community strings are restricted to HQ IPs for security. Syslog forwarding from all routers ensures centralized event visibility.
4. MikroTik Monitoring Scripts (Overview)
Each MikroTik router runs automated scripts to detect link failures and notify administrators. The scripts use Netwatch to monitor gateway IPs and Ethernet link states. When a failure occurs, the router sends a Telegram alert to the Caf Amrica IT team via a dedicated bot, and optionally triggers an email alert through SMTP.
5. Alert Flow

????????????????
? MikroTik     ?
? (Netwatch)   ?
????????????????
       ? detects link failure
       ?
????????????????
? Script runs  ?
? (SendTelegram)?
????????????????
       ? sends message
       ?
????????????????
? Telegram Bot ?
? (Facu/IT Team)?
????????????????
       ? parallel alert
       ?
????????????????
? Observium CE ?
? Alert Trigger?
????????????????
       ? sends email notification
       ?
????????????????
? it@example.com ?
????????????????

6. Security and Maintenance
Security best practices include:
- Restrict SNMP access by IP and community.
- Regular backups of router configurations.
- VLAN isolation for monitoring traffic.
- Syslog redirection to HQ Observium server.
- Scheduled router scripts for uptime verification.
- Future transition to IPsec for L2TP tunnels.
7. Backup Strategy
Each branch will use a local QNAP NAS configured with Hybrid Backup Sync (HBS 3). Daily incremental backups are replicated to the HQ NAS and optionally to Azure Blob storage. Active Backup for Business can be used to centralize status and logs for all PCs and servers.
8. Scalability Notes
The monitoring system supports expansion through Observium's auto-discovery. Additional routers or switches can be added by enabling SNMP and registering their IPs. Integration with Azure Site Recovery will provide disaster recovery and centralized domain services.
9. Conclusion
This engineering plan ensures that Caf Amrica maintains full operational visibility and rapid fault detection across all branches. By leveraging Observium, Telegram, and structured monitoring scripts, the company achieves an enterprise-grade monitoring solution while remaining flexible for future integration with Fortinet and Azure ecosystems.
    ?
????????????????
? Telegram Bot ?
? (Facu/IT Team)?
????????????????
       ? parallel alert
       ?
????????????????
? Observium CE ?
? Alert Trigger?
????????????????
       ? sends email notification
       ?
????????????????
? facundo@flowit-ar.com ?
????????????????

6. Security and Maintenance
Security best practices include:
- Restrict SNMP access by IP and community.
- Regular backups of router configurations.
- VLAN isolation for monitoring traffic.
- Syslog redirection to HQ Observium server.
- Scheduled router scripts for uptime verification.
- Future transition to IPsec for L2TP tunnels.
7. Backup Strategy
Each branch will use a local QNAP NAS configured with Hybrid Backup Sync (HBS 3). Daily incremental backups are replicated to the HQ NAS and optionally to Azure Blob storage. Active Backup for Business can be used to centralize status and logs for all PCs and servers.
8. Scalability Notes
The monitoring system supports expansion through Observium's auto-discovery. Additional routers or switches can be added by enabling SNMP and registering their IPs. Integration with Azure Site Recovery will provide disaster recovery and centralized domain services.
9. Conclusion
This engineering plan ensures that Caf Amrica maintains full operational visibility and rapid fault detection across all branches. By leveraging Observium, Telegram, and structured monitoring scripts, the company achieves an enterprise-grade monitoring solution while remaining flexible for future integration with Fortinet and Azure ecosystems.
